---
tags: [In-App, Online, Samsung Pay, Wallet, Mobile]
---

# Samsung Pay: App Integration

Commerce Hub's RESTful API integration allows the merchant to create a custom App integration with Samsung Pay. The merchant will present the payment processing form on their App and submit the transaction to Commerce Hub.

#### How it Works

1. Customer selects checkout from the merchant's App.
2. Customer then presented with the merchant's payment form.
3. The App calls the Samsung Pay framework to obtain the encrypted wallet data.
4. Merchant's App submits the encrypted Google Pay payload to Commerce Hub.
5. Commerce Hub attempts to process the transaction and sends the response to the merchant's App.

---

## Step 1: Configure Samsung Pay

Configure the Samsung [developer account](https://pay.samsung.com/developers/tour/memberguide) with the merchant information to accept Samsung Pay in an App. This includes creating a merchant identifier, create a Samsung Pay In-App or App2App service and upload a processing certificate.

- When using *SamsungPay*, the merchant will utilize the certificate generated by Commerce Hub. Please contact our Account Representative in order to get the certificate.
- When using *WalletDecrypted*, the merchant will utilize their own certificate.


---

## Step 2: Download Samsung SDK

A merchant will need to create a project in Android Studio to start supporting Samsung Pay in their app. Refer to Samsung's In-App or App2App [integration guides](https://pay.samsung.com/developers/resource/guide) on how to integrate the Samsung SDK.

---

## Step 3: Submit a Payment Request

The merchant can submit a payment request to Samsung to verify if Samsung Pay is supported and to receive the encrypted wallet data. Refer to Samsung's In-App or App2App [integration guides](https://pay.samsung.com/developers/resource/guide) for more detail.

---

## Step 4: Submit a Charge Request

- [**Encrypted Data:**](#request-variables) The data is encrypted using Samsung's encryption and Commerce Hub will decrypt the information.
- [**Decrypted Wallet:**](?path=docs/Resources/Guides/Payment-Sources/Decrypted-Wallet.md) The data is encrypted and decrypted using a merchant's certificate and the card data is submitted to Commerce Hub.

---

### Request Variables

<!--
type: tab
titles: source, header
-->

The below table identifies the required parameters in the `source` object.

| Variable | Type | Maximum Length | Required | Description |
|---------|----------|--------|--------|---------|
|`sourceType` | *string* | 15 | &#10004; | Value *ApplePay* is used for Apple Pay request. Refer Payment [source type](?path=docs/Resources/Guides/Payment-Sources/Source-Type.md) for more details. |
| `data` | *string* | 4000 | &#10004; | Encrypted Data. Payment data dictionary, Base64 encoded as a string. |
| `header` | *object* | N/A| &#10004; | Additional version-dependent information used to decrypt and verify the payment. |
| `signature` | *string* | 4000 | &#10004; | Signature of the payment and header data. The signature includes the signing certificate, its intermediate CA certificate, and information about the signing algorithm. Detached PKCS #7 signature, Base64 encoded as string. |

| `merchantPrivateKey` | *string* | 256 | &#10004; | Merchant private key - Hex encoded |

<!--
type: tab
-->

The below table identifies the required parameters in the `header` object.

| Variable | Type | Maximum Length | Required | Description |
| -------- | ------ | --------- | ---------|--------- |
| `applicationDataHash` | *string* | 256 | | Encrypted app data |
| `ephemeralPublicKey` | *string* | 256 | &#10004; | Used to derive the actual Public Key. Ephemeral public key bytes. EC_v1 only. X.509 encoded key bytes, Base64 encoded as a string. |
| `publicKeyHash` | *string* | 256 | &#10004; | Hash of the X.509 encoded public key bytes of the merchant’s certificate. SHA–256 hash, Base64 encoded as a string. |
| `transactionId` | *string* | 256 | &#10004; | Transaction ID generated by the Apple device. A hexadecimal identifier, as a string. |

<!-- type: tab-end -->

---

### Payload Example

<!-- theme:info -->
>Merchants managing their own encryptions will send a [Decrypted Wallet](?path=docs/Resources/Guides/Payment-Sources/Decrypted-Wallet.md) payload request.

<!--
type: tab
titles: Request, Response
-->

##### Example of a charge payload request.

```json
{
  "amount": {
    "total": "12.04",
    "currency": "USD"
  },
  "source": {
    "sourceType": "SamsungPay",
    "data": "eyJhbGciOiJSU0ExXzUiLCJraWQiOiJ....",
    "version": "100",
    "samsungPayMerchantId": "merchant.com"
  }
  "transactionDetails": {
    "captureFlag": true,
    "createToken": false
  },
  "merchantDetails":{
      "merchantId": "123456789789567",
      "terminalId": "123456"
    }
}

```

<!--
type: tab
-->

##### Example of a charge (201: Created) response.

<!-- theme: info -->
> See [Response Handling](?path=docs/Resources/Guides/Response-Codes/Response-Handling.md) for more information.

```json
{
   "gatewayResponse":{
      "transactionType": "CHARGE",
      "transactionState": "AUTHORIZED",
      "transactionOrigin": "ECOM",
      "transactionProcessingDetails":{
         "transactionTimestamp": "2021-06-20T23:42:48Z",
         "orderId": "RKOrdID-525133851837",
         "apiTraceId": "362866ac81864d7c9d1ff8b5aa6e98db",
         "clientRequestId": "4345791",
         "transactionId": "84356531338"
      }
   },
   "source":{
      "sourceType": "DecryptedWallet",
      "card":{
         "bin": "40055500",
         "last4": "0019",
         "scheme": "VISA",
         "expirationMonth": "10",
         "expirationYear": "30"
      },
      "cavv": "01ade6ae340005c681c3a1890418b53000020000",
      "wallet": "APPLE_PAY"
   },
   "paymentReceipt":{
      "approvedAmount":{
         "total": 12.04,
         "currency": "USD"
      },
      "merchantName": "Merchant Name",
      "merchantAddress": "123 Peach Ave",
      "merchantCity": "Atlanta",
      "merchantStateOrProvince": "GA",
      "merchantPostalCode": "12345",
      "merchantCountry": "US",
      "merchantURL": "https://www.somedomain.com",
      "processorResponseDetails":{
         "approvalStatus": "APPROVED",
         "approvalCode": "OK5882",
         "schemeTransactionId": "0225MCC625628",
         "processor": "FISERV",
         "host": "NASHVILLE",
         "responseCode": "000",
         "responseMessage": "APPROVAL",
         "hostResponseCode": "00",
         "hostResponseMessage": "APPROVAL",
         "localTimestamp": "2021-06-20T23:42:48Z",
         "bankAssociationDetails":{
            "associationResponseCode": "000",
            "transactionTimestamp": "2021-06-20T23:42:48Z"
         }
      }
   },
   "transactionDetails":{
      "captureFlag": true,
      "merchantInvoiceNumber": "123456789012"
   }
}
```
<!-- type: tab-end -->

---

## See Also

- [API Explorer](../api/?type=post&path=/payments/v1/charges)
- [Charge Request](?path=docs/Resources/API-Documents/Payments/Charges.md)
- [Samsung Pay Web Integration - RESTful API](?path=docs/Online-Mobile-Digital/Wallets-AltPayments/Samsung-Pay/Samsung-Pay-Web-REST.md)
- [Google Pay](?path=docs/Online-Mobile-Digital/Wallets-AltPayments/Google-Pay/Google-Pay.md)
- [Apple Pay](?path=docs/Online-Mobile-Digital/Wallets-AltPayments/Apple-Pay/Apple-Pay.md)

---
